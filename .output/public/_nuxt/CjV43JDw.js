import{_ as D}from"./BpeJ1J3J.js";import{_ as P}from"./DlAUqK2U.js";import{o as R,c as O,a as n,t as S,i as N,p as L,e as U,q,s as F,x as H,f as K,r as j,h as V,v as E,d as _,b as w,w as $,F as z}from"./DNFUN7EY.js";import{u as M,a as Q}from"./DuDa9e-g.js";const G=t=>(L("data-v-6834d8ed"),t=t(),U(),t),J={key:0,class:"popup"},W={class:"inner"},X=G(()=>n("div",null,"알림",-1)),Y={class:"body-ct"},Z={class:"bottom-ct"},ee={__name:"popup",props:{isVisible:{type:Boolean,default:""},idType:{type:String,default:""},texts:{type:String,default:""},btntexts:{type:String,default:""}},emits:["update:isVisible"],setup(t,{emit:s}){const e=t,c=s,a=()=>{c("update:isVisible",!1)};return(i,p)=>e.isVisible?(R(),O("div",J,[n("div",W,[n("div",{class:"top-ct"},[X,n("div",{onClick:a},"X")]),n("div",Y,S(e.texts),1),n("div",Z,[n("button",{class:"red-active",onClick:a},S(e.btntexts),1)])])])):N("",!0)}},te=P(ee,[["__scopeId","data-v-6834d8ed"]]),se=()=>({key:null,type:"modal",title:null,message:null,isActive:!1,onClose:null,buttons:null,size:1e3}),ne=q("modal",{state(){return{items:{}}},actions:{open(t,s={}){let e={};return typeof t=="function"?e={isActive:!0,onClose(){t(null)},...s}:typeof t=="object"&&(e=t),e.key=e.key===void 0?uGenKey("modal"):e.key,this.items[e.key]={...se(),...e},this.items[e.key].isActive=!0,typeof t=="function"&&t(e.key),e.key},alert(t,s=null){const e=this;if(typeof t=="string"){const c=uGenKey("modal");this.open({key:c,type:"alert",title:"알림",message:t,onClose(){s&&s();const a=Object.keys(e.items).filter(i=>i!==c);if(a)for(const i of a)e.items[i].type==="alert"&&(e.items[i].onClose=null,e.close(i))},buttons:[{text:"확인"}]})}else t.type="alert",this.open(t)},confirm(t,s){this.alert({title:"알림",message:t,buttons:[{text:"취소",styleType:"secondary"},{text:"확인",onConfirm:s}]})},close(t){var s;this.items[t].onClose&&((s=this.items[t])==null||s.onClose()),delete this.items[t]},reset(){this.items={}}}}),oe="",ie=({id:t,pwd:s,tokenIssuId:e,encData:c,sign:a})=>B({id:"2.3 표준창 로그인",endpoint:"auth/signin",headers:"PUBLIC",data:{id:t,pwd:s,tokenIssuId:e,encData:c,sign:a},onResponse({code:i,data:p}){return i===2e3?(M(p.acsTkn),!0):!1}}),y=Q(),x={"Content-Type":"application/json;charset=UTF-8",appId:"HOMEHNHPWEB-POPUP",appKey:"new1234",Authorization:null},ae=t=>{if(typeof t=="string"){const s={"Content-Type":x["Content-Type"],appId:x.appId,appKey:x.appKey};switch(t){case"DEFAULT":return{...s,Authorization:x.Authorization};case"PUBLIC":return s}}else return typeof t=="function"?t():t},le=t=>(console.log(t),console.log("app.isRouting - ",y.isRouting),uAddError(0,()=>{uAlert(t.response.data.message)}),!1),B=async t=>{const{id:s,endpoint:e,method:c,headers:a,withCredentials:i,beforeRequest:p,data:d={},onResponse:h,onError:u,onFinally:r}=t;if(p&&await p()===!1)return console.log("🟡 요청 취소:",s),!1;Object.keys(d).forEach(l=>{d[l]===null&&delete d[l]});const v=F({method:c||"post",url:oe+e,headers:ae(a),data:d,withCredentials:i!==void 0?i:!1}).then(l=>{y.isLoggedIn===null&&a==="DEFAULT"&&(y.isLoggedIn=!0);const{data:o,status:f,config:b}=l;console.log(`🟢 API - ${b.url}
`),console.log(s);const g=JSON.stringify(o,null,2);return console.log(g),h({code:o.code,data:o.data,message:o.message})}).catch(async l=>{var g,I,T,C,A;const o=(I=(g=l.response)==null?void 0:g.data)==null?void 0:I.code,f=(C=(T=l.response)==null?void 0:T.data)==null?void 0:C.message;console.log(`🔴 API ${s}, ${o}, ${f}
`,(A=l.response)==null?void 0:A.data);const b=H();if(o===3e3)return await authTknReiss()&&e!=="/auth/tkn/verify"?B(t):!1;if(o===4020||o===4022)return uAddError(9999,()=>{setTimeout(()=>{uAlert(f);const m=ne();console.log(m.items)})}),b.push("/login"),!1;if(o===4013)return uAddError(9999,()=>{setTimeout(()=>{uAlert(f)})}),b.push("/"),!1;if(o===3004||o===3002)return uAddError(9999,()=>{uAlert(f,async()=>{await authSignout()})}),!1;if(u){let m;if(typeof u=="function"?m=u(o):m=u[String(o)]?u[String(o)](f):void 0,m!==void 0)return m}return le(l),!1}).finally(()=>{y.apiQueue=y.apiQueue.filter(l=>l!==v),r&&r()});return y.apiQueue.push(v),v},k=t=>(L("data-v-d83e7a05"),t=t(),U(),t),de=k(()=>n("button",{class:"bg-w line-active"},"회원",-1)),ce={class:"content"},re={class:"inner"},ue={class:"mb-btm-20"},pe=k(()=>n("br",null,null,-1)),fe={class:"bottom"},me=k(()=>n("p",null,[_(" 고객님의 배송지 개인정보(이름, 휴대폰번호, 주소) 대신 사용하는 "),n("br"),_(" 11자리 보안번호로 개인정보를 안전하게 지켜드립니다. ")],-1)),ye={__name:"index",setup(t){const s=K(),e=j({id:"",pwd:"",tokenIssuId:"",encData:"",sign:"",isOpen:!1,idType:"",texts:"",btntexts:""}),c=()=>{s.push("/homenumberInquiry")},a=async()=>{(!e.id||!e.pwd)&&(e.isOpen=!0),e.id?e.pwd||(e.idType="02",e.texts="비밀번호 ...",e.btntexts="재시도"):(e.idType="01",e.texts="아이디 ...",e.btntexts="재시도"),await ie(e.id,e.pwd,e.tokenIssuId,e.encData,e.sign)&&s.push("/homnumberList"),console.log("d.idType : ",e.idType),console.log("d.texts",e.texts),console.log("d.id : ",e.id),console.log("d.pwd : ",e.pwd)},i=()=>{s.push("/signup")};return(p,d)=>{const h=D,u=te;return R(),O(z,null,[n("div",{class:"tab-btns"},[de,n("button",{class:"bg-w line",onClick:c},"홈넘버")]),n("div",ce,[n("div",re,[V(n("input",{"onUpdate:modelValue":d[0]||(d[0]=r=>e.id=r),class:"mb-btm-6",type:"text",placeholder:"아이디"},null,512),[[E,e.id]]),V(n("input",{"onUpdate:modelValue":d[1]||(d[1]=r=>e.pwd=r),class:"mb-btm-20",type:"password",placeholder:"패스워드"},null,512),[[E,e.pwd]]),n("button",{class:"mb-btm-20 red-active",onClick:a}," 로그인 "),n("p",ue,[_(" 아이디/비밀번호 찾기는 "),pe,_(" 홈넘버 사이트에서 확인이 가능합니다. "),w(h,{to:"https://www.homenumber.co.kr/",target:"_blank"},{default:$(()=>[_(" 바로가기 > ")]),_:1})]),n("button",{class:"bg-g line",onClick:i}," 홈넘버 회원가입 ")])]),n("div",fe,[me,w(h,{to:"/serviceInfo"},{default:$(()=>[_("자세히 >")]),_:1})]),w(u,{isVisible:e.isOpen,idType:e.idType,texts:e.texts,btntexts:e.btntexts,"onUpdate:isVisible":d[2]||(d[2]=r=>e.isOpen=r)},null,8,["isVisible","idType","texts","btntexts"])],64)}}},xe=P(ye,[["__scopeId","data-v-d83e7a05"]]);export{xe as default};
